import { useState, useEffect } from 'react';
import { users } from '../../../../shared/lib/mocks/users';

export interface Comment {
  id: number;
  text: string;
}

export interface Post {
  id: number;
  title: string;
  text: string;
  comments: Comment[];
  userId: number;
}

export interface User {
  id: number;
  name: string;
  email: string;
  avatar?: string;
  bio?: string;
}

export interface UsePostsReturn {
  posts: Post[];
  users: User[];
  loading: boolean;
  error: string | null;
  refetch: () => void;
}

export const usePosts = (): UsePostsReturn => {
  const [posts, setPosts] = useState<Post[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const fetchPosts = async () => {
    try {
      setLoading(true);
      setError(null);
      
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      const mockPosts: Post[] = [
        {
          id: 1,
          title: "ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚ ASTON",
          text: "ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼! Ð¯ Ð”ÐµÐ½Ð¸Ñ Ð“Ð°Ð½ÐµÐµÐ², ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚ ASTON. Ð˜Ð·ÑƒÑ‡Ð°ÑŽ Ð²ÐµÐ±-Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¸ Ð¾Ñ‡ÐµÐ½ÑŒ Ñ€Ð°Ð´ Ð±Ñ‹Ñ‚ÑŒ Ñ‡Ð°ÑÑ‚ÑŒÑŽ ÑÑ‚Ð¾Ð³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð°!",
          comments: [
            { id: 1, text: "ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐšÐ°Ðº ÑƒÑ‡Ñ‘Ð±Ð°? ÐšÐ°ÐºÐ¸Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ñ‹ Ð¸Ð·ÑƒÑ‡Ð°ÐµÑˆÑŒ?" },
            { id: 2, text: "ASTON - Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð°Ñ ÑˆÐºÐ¾Ð»Ð°! Ð£Ð´Ð°Ñ‡Ð¸ Ð² Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ð¸! ðŸŽ“" },
            { id: 3, text: "ÐšÐ°ÐºÐ¾Ð¹ ÐºÑƒÑ€Ñ? Ð¯ Ñ‚Ð¾Ð¶Ðµ Ñ‚Ð°Ð¼ ÑƒÑ‡ÑƒÑÑŒ, Ð¼Ð¾Ð¶ÐµÑ‚ Ð·Ð½Ð°ÐºÐ¾Ð¼Ñ‹?" }
          ],
          userId: 1
        },
        {
          id: 4,
          title: "Ð˜Ð·ÑƒÑ‡Ð°ÑŽ React Ð¸ TypeScript",
          text: "ÐÐµÐ´Ð°Ð²Ð½Ð¾ Ð½Ð°Ñ‡Ð°Ð» Ð¸Ð·ÑƒÑ‡Ð°Ñ‚ÑŒ React Ñ TypeScript. ÐžÑ‡ÐµÐ½ÑŒ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ Ñ‚Ð¸Ð¿Ð¸Ð·Ð°Ñ†Ð¸Ñ - Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð½Ð° ÑÑ‚Ð°Ð¿Ðµ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸. ÐŸÐ»Ð°Ð½Ð¸Ñ€ÑƒÑŽ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð° ÑÑ‚Ð¸Ñ… Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸ÑÑ…!",
          comments: [
            { id: 5, text: "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¹! TypeScript Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚" },
            { id: 6, text: "Ð£Ð´Ð°Ñ‡Ð¸ Ð² Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸Ð¸! React + TypeScript - Ð¼Ð¾Ñ‰Ð½Ð°Ñ ÑÐ²ÑÐ·ÐºÐ°" },
            { id: 7, text: "Ð•ÑÐ»Ð¸ Ð±ÑƒÐ´ÑƒÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¿Ð¾ React, Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ð¹ÑÑ!" }
          ],
          userId: 1
        },
        {
          id: 2,
          title: "Ð˜Ñ‰ÐµÐ¼ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ!",
          text: "ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐœÐµÐ½Ñ Ð·Ð¾Ð²ÑƒÑ‚ Ð¢Ð°Ñ‚ÑŒÑÐ½Ð° Ð¤Ð¾Ð¼Ð¸Ñ‡ÐµÐ²Ð°, Ñ HR-Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€. ÐœÑ‹ Ð¸Ñ‰ÐµÐ¼ Ñ‚Ð°Ð»Ð°Ð½Ñ‚Ð»Ð¸Ð²Ñ‹Ñ… Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð´Ð»Ñ Ð½Ð°ÑˆÐµÐ¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹. Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð·Ð°Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ¾Ð²Ð°Ð½Ñ‹ Ð² Ð½Ð¾Ð²Ñ‹Ñ… Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑÑ…, Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¾Ð±ÑÑƒÐ´Ð¸Ð¼!",
          comments: [
            { id: 1, text: "ÐšÐ°ÐºÐ¸Ðµ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚Ðµ? ÐžÑ‡ÐµÐ½ÑŒ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾!" },
            { id: 2, text: "Ð“Ð¾Ñ‚Ð¾Ð²Ð° Ñ€Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²Ð°ÐºÐ°Ð½ÑÐ¸ÑŽ! ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑŽ Ñ€ÐµÐ·ÑŽÐ¼Ðµ" },
            { id: 3, text: "Ð£ÑÐ»Ð¾Ð²Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÐºÐ°ÐºÐ¸Ðµ? Ð£Ð´Ð°Ð»Ñ‘Ð½ÐºÐ° Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð°?" },
            { id: 4, text: "ÐžÐ¿Ñ‹Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ? Ð˜Ð»Ð¸ Ð±ÐµÑ€Ñ‘Ñ‚Ðµ junior-Ð¾Ð²?" }
          ],
          userId: 2
        },
        {
          id: 3,
          title: "ÐšÐ°Ðº Ð²Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÐ»Ð¸ ÑÑ‚Ð¾ Ð»ÐµÑ‚Ð¾?",
          text: "ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼! Ð¯ ÐžÐ»ÐµÐ³ ÐŸÐµÑ‚Ñ€Ð¾Ð², Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„ Ð¸ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¸Ðº. Ð›ÐµÑ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¿Ð¾Ñ‚Ñ€ÑÑÐ°ÑŽÑ‰Ð¸Ð¼! Ð¥Ð¾Ñ‚ÐµÐ»Ð¾ÑÑŒ Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ, ÐºÐ°Ðº Ð²Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÐ»Ð¸ ÑÑ‚Ð¸ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ðµ Ð¼ÐµÑÑÑ†Ñ‹?",
          comments: [
            { id: 1, text: "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾ Ð¿Ñ€Ð¾Ð²Ñ‘Ð» Ð²Ñ€ÐµÐ¼Ñ Ð½Ð° Ð¼Ð¾Ñ€Ðµ! Ð‘Ñ‹Ð»Ð¾ Ð¶Ð°Ñ€ÐºÐ¾, Ð½Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ ÐºÑ€ÑƒÑ‚Ð¾ ðŸŒŠ" },
            { id: 2, text: "Ð›ÐµÑ‚Ð¾ Ð¿Ñ€Ð¾ÑˆÐ»Ð¾ Ð±Ñ‹ÑÑ‚Ñ€Ð¾... Ð’ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð», Ð½Ð¾ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð±Ñ‹Ð»Ð¸ ÐºÐ»Ð°ÑÑÐ½Ñ‹Ðµ!" },
            { id: 3, text: "ÐŸÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð» Ð¿Ð¾ Ð Ð¾ÑÑÐ¸Ð¸ - ÑÑ‚Ð¾Ð»ÑŒÐºÐ¾ ÐºÑ€Ð°ÑÐ¸Ð²Ñ‹Ñ… Ð¼ÐµÑÑ‚ Ð¾Ñ‚ÐºÑ€Ñ‹Ð» Ð´Ð»Ñ ÑÐµÐ±Ñ!" },
            { id: 4, text: "Ð‘Ñ‹Ð»Ð¾ ÐºÑ€ÑƒÑ‚Ð¾! Ð¥Ð¾Ð´Ð¸Ð» Ð² Ð¿Ð¾Ñ…Ð¾Ð´Ñ‹, Ð¼Ð½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð° Ð¿Ñ€Ð¸Ñ€Ð¾Ð´Ðµ Ð¿Ñ€Ð¾Ð²Ñ‘Ð» ðŸ”ï¸" }
          ],
          userId: 3
        }
      ];
      
      setPosts(mockPosts);
    } catch (err) {
      setError('ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ð¾ÑÑ‚Ð¾Ð²');
    } finally {
      setLoading(false);
    }
  };

  const refetch = () => {
    fetchPosts();
  };

  useEffect(() => {
    fetchPosts();
  }, []);

  return {
    posts,
    users,
    loading,
    error,
    refetch
  };
};
